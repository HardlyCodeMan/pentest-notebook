# Kerberos

Since Windows Server 2003 Microsoft has utilised version 5 of the the Kerberos authentication protocol created by MIT. Kerberos uses a ticket system rather than challenge-response of NTLM.

1. Client - Sends Domain Controller (DC) based Authentication Server an authentication request - AS\_REQ containing a timestamp (encrypted with a hash derived from the users' password) and username. The Authentication Server is also known as the Key Distribution Center (KDC)
2. DC - Authentication Server response after successfully decrypting the timestamp with it's own copy of the derivative password hash.
3. Client - Sends request to Ticket Granting Service (TGS) on the DC.
4. DC - TGS response AS\_REP containing a session key and Ticket Granting Ticket (TGT). The session key is encrypted with the users password hash, it may be decrypted by the client and reused.&#x20;
5. Client - Sends Application Server request&#x20;
6. App Server - Responds with Service Authentication

The Ticket Granting Ticket (TGT) is encrypted using a secret key known only by the Key Distribution Center (KDC), the TGT contains user information including group memberships, domain, IP and the session key. By default a TGT is valid for 10 hours before requiring renewal, which does not require the re-entry of a password.
