---
description: >-
  Active Directory enumeration with cmd.exe (run as administrator) and the
  net.exe tool.
---

# With CMD

### Useful targets:&#x20;

Domain Admins - control every computer of that domain.

Domain Controller (DC) - control every computer and access all password hashes on that domain .

{% hint style="info" %}
Ensure cmd.exe is run as Administrator.
{% endhint %}

### Enumerate Local Users

```
C:\Users\pfry>net users

User accounts for \\FRY

-------------------------------------------------------------------------------
Administrator            DefaultAccount           Guest
WDAGUtilityAccount       Windows10
The command completed successfully.
```

### Enumerate Domain Users

```
C:\Users\pfry>net user /domain
The request will be processed at a domain controller for domain FUTURAMA.local.


User accounts for \\Bender.FUTURAMA.local

-------------------------------------------------------------------------------
20th_fox_admin           Administrator            awong
Guest                    hconrad                  hfarnsworth
hfarnsworth_admin        jzoidberg                krbtgt
pfry                     SQLService               tleela
The command completed successfully.
```

### Further Enumeration of a Domain User

```
C:\Users\pfry>net user hfarnsworth_admin /domain
The request will be processed at a domain controller for domain FUTURAMA.local.

User name                    hfarnsworth_admin
Full Name                    Hubert J. Farnsworth ADMIN
Comment
User's comment
Country/region code          000 (System Default)
Account active               Yes
Account expires              Never

Password last set            19/04/2022 11:30:09 AM
Password expires             Never
Password changeable          20/04/2022 11:30:09 AM
Password required            Yes
User may change password     Yes

Workstations allowed         All
Logon script
User profile
Home directory
Last logon                   Never

Logon hours allowed          All

Local Group Memberships
Global Group memberships     *Domain Admins        *Domain Users
The command completed successfully.
```

### Group Account Enumeration

```
C:\Users\pfry>net group /domain
The request will be processed at a domain controller for domain FUTURAMA.local.


Group Accounts for \\Bender.FUTURAMA.local

-------------------------------------------------------------------------------
*Cloneable Domain Controllers
*DnsUpdateProxy
*Domain Admins
*Domain Computers
*Domain Controllers
*Domain Guests
*Domain Users
*Enterprise Admins
*Enterprise Key Admins
*Enterprise Read-only Domain Controllers
*Group Policy Creator Owners
*Key Admins
*Protected Users
*Read-only Domain Controllers
*Schema Admins
The command completed successfully.
```

{% hint style="info" %}
Unfortunately net.exe will not list nested groups.
{% endhint %}
